<ion-view>
    <ion-content id="bpm-detail-content" class="stable-bg vivo-detail-content" padding="true" ng-class="getContentBottom()" scroll="false">
        <div class="list card no-margin">
            <ion-item>
                <div class="list-vivo-title">
                    <span>【{{item.typeName}}】</span>
                    <span>{{item.Header_formSubTitle}}</span></div>
                <hr>
                <div class="list-vivo-control" ng-if="item">
                    <div class="row">
                        <div class="col col-70"><span>拟稿人：{{item.Header_CreateUserName}}</span><span>{{item.txt_FDocUnit_text}}</span></div>
                        <div class="col col-30 text-right">{{item.txt_FDocDate.substr(5,11)}}</div>
                    </div>
                    <div class="row">
                        <div class="col col-70"><span>当前处理人：{{item.txt_FCurrentUser}}</span></div>
                        <div class="col col-30 text-right">{{item.txt_FDocCurrentStatus}}</div>
                    </div>
                </div>
            </ion-item>

        </div>
        <div class="list card">
            <ion-item class="item item-icon-right bpm-detail-blue"
                      ng-click="toggleMainText()">
                <i class="icon button-small " ng-class="isShowMainText ?'ion-ios-arrow-up':'ion-ios-arrow-down'"></i>
                正文
            </ion-item>
            <div class="bpm-detail-blue-bg vivo-maintext-div"></div>
        </div>
        <div class="list srm-Authentication-maintext" ng-show="isShowMainText">
            <div class="list card">
                <div class="item title">
                    <span class="assertive-bg">&nbsp;</span><div>基本信息</div>
                </div>
                <div class="item item-infor">
                    <span>项目编号:</span>
                    <div>{{item.sel_FProjectNo}}</div>
                </div>

                <div class="item item-infor">
                    <span>产生阶段:</span>
                    <div>{{item.sel_FGenerateStage}}</div>
                </div>
                <div class="item item-infor">
                    <span>变更原因分类:</span>
                    <div>{{item.sel_FReasonType}}</div>
                </div>
                <div class="item item-infor">
                    <span>变更原因:</span>
                    <div>{{item.txt_FChangeReason}}</div>
                </div>
                <div class="item item-infor">
                    <span>变更内容:</span>
                    <div>{{item.txt_FChangeContent}}</div>
                </div>

            </div>
            <div class="list card">
                <div class="item title">
                    <span class="balanced-bg">&nbsp;</span><div> 附件说明</div>
                </div>
                <div class="item">
                    <div id="div_FContainer" class="ViceText-div"></div>
                </div>
            </div>

            <div class="list card">
                <div class="item item-infor">
                    <span>变更等级:</span>
                    <div>{{item.div_FChangeLevel}}</div>
                </div>
                <div class="item item-infor">
                    <span>影响范围:</span>
                    <div>{{item.div_FImpactScope}}</div>
                </div>
                <div class="item item-infor">
                    <span>受影响交付件:</span>
                    <div>{{item.div_FImpactDelivery}}</div>
                </div>
                <div class="item item-infor">
                    <span>是否召开CCB会议:</span>
                    <div>{{item.div_FCCBMeeting}}</div>
                </div>
                <div class="item item-infor">
                    <span>变更前的软件、硬件是否出货:</span>
                    <div>{{item.div_FBeginIsShipment}}</div>
                </div>
                <div class="item item-infor">
                    <span>风险影响分析及方案:</span>
                    <div>{{item.txt_FRiskImpact}}</div>
                </div>
                <div class="item item-infor">
                    <span>成本及进度影响方案:</span>
                    <div>{{item.txt_FCostAndSchedule}}</div>
                </div>
                <div class="item item-infor">
                    <span>测试与验证方案:</span>
                    <div>{{item.txt_FValidation}}</div>
                </div>
                <div class="item item-infor">
                    <span>财务损失核算:</span>
                    <div>{{item.txt_FLossAccounting}}</div>
                </div>
                <div class="item item-infor">
                    <span>是否转为重大异常:</span>
                    <div>{{item.div_FBigAabnormal}}</div>
                </div>
            </div>
            <div class="list card">
                <div class="item title">
                    <span class="positive-bg">&nbsp;</span><div>会签</div>
                </div>
                <ion-list class="vivo-audit-infor">
                    <div class="item">
                        <span>参与角色:<span>相关人</span></span>
                    </div>
                    <div class="item long-title"  ng-if="item.txt_FMarketing_text!=''">
                        <span>营销代表:<span class="audit-user-span">{{item.txt_FMarketing_text}}</span></span>
                    </div>
                    <div class="item long-title"  ng-if="item.txt_FAdvertisement_text!=''">
                        <span>广告品人员:<span class="audit-user-span">{{item.txt_FAdvertisement_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FStructure_text!=''">
                        <span>工业设计代表:<span class="audit-user-span">{{item.txt_FStructure_text}}</span></span>
                    </div>
                    <div class="item long-title"  ng-if="item.txt_FPackaging_text!=''">
                        <span>包装人员:<span class="audit-user-span">{{item.txt_FPackaging_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FUE_text!=''">
                        <span>UE代表:<span class="audit-user-span">{{item.txt_FUE_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FInstructions_text!=''">
                        <span>说明书制作人员:<span class="audit-user-span">{{item.txt_FInstructions_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FMaterial_text!=''">
                        <span>电子高级SE:<span class="audit-user-span">{{item.txt_FMaterial_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FElectronLeader_text!=''">
                        <span>电子leader:<span class="audit-user-span">{{item.txt_FElectronLeader_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FMaterial_text!=''">
                        <span>材料人员:<span class="audit-user-span">{{item.txt_FMaterial_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FSoftwareLeader_text!=''">
                        <span>软件leader:<span class="audit-user-span">{{item.txt_FSoftwareLeader_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FSoftwareEngineer_text!=''">
                        <span>软件系统工程师:<span class="audit-user-span">{{item.txt_FSoftwareEngineer_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FStructureSE_text!=''">
                        <span>结构高级SE:<span class="audit-user-span">{{item.txt_FStructureSE_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FStructureLeader_text!=''">
                        <span>结构leader:<span class="audit-user-span">{{item.txt_FStructureLeader_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FLogistics_text!=''">
                        <span>物流代表:<span class="audit-user-span">{{item.txt_FLogistics_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FManufacture_text!=''">
                        <span>制造代表:<span class="audit-user-span">{{item.txt_FManufacture_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FTest_text!=''">
                        <span>测试代表:<span class="audit-user-span">{{item.txt_FTest_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FCustomerSupport_text!=''">
                        <span>客户支持人员:<span class="audit-user-span">{{item.txt_FCustomerSupport_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FCostCommissioner_text!=''">
                        <span>成本专员:<span class="audit-user-span">{{item.txt_FCostCommissioner_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FNetworkEngineer_text!=''">
                        <span>入网工程师:<span class="audit-user-span">{{item.txt_FNetworkEngineer_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FOperatorElectron_text!=''">
                        <span>运营商入围电子代表:<span class="audit-user-span">{{item.txt_FOperatorElectron_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FOperatorSoftware_text!=''">
                        <span>运营商入围软件代表:<span class="audit-user-span">{{item.txt_FOperatorSoftware_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FSQA_text!=''">
                        <span>SQA:<span class="audit-user-span">{{item.txt_FSQA_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FProjectAssistant_text!=''">
                        <span>项目助理:<span class="audit-user-span">{{item.txt_FProjectAssistant_text}}</span></span>
                    </div>
                    <div class="item long-title" ng-if="item.txt_FCustomerService_text!=''">
                        <span>客户服务:<span class="audit-user-span">{{item.txt_FCustomerService_text}}</span></span>
                    </div>
                </ion-list>
            </div>
            <div class="list card">
                <div class="item title">
                    <span class="royal-bg">&nbsp;</span><div>会签记录</div>
                </div>
                <ion-list class="vivo-audit-infor">
                    <div class="item" ng-repeat="approveItem in item.FSign_list">
                        <span>{{approveItem.HandleUserName}}  会签</span>
                        <div>
                            {{approveItem.HandleTime}}，{{approveItem.HandleOpinion}}
                        </div>
                    </div>

                </ion-list>
            </div>
            <div class="list card" ng-if="item.files.length>0">
                <div class="item title">
                    <span class="acttach-title-bg">&nbsp;</span><div>附件</div>
                </div>
                <div class="item item-attach" ng-repeat="fileLine in item.files">
                    <span class="attach-span"></span><span class="attach-span1">附件{{cnNumber[$index]}}：</span><a class="attach-span2" ng-click="clickAttach(fileLine)">{{fileLine.FAttachmentName}} (点击下载)</a>
                </div>
            </div>
            <div class="list card">
                <div class="item title">
                    <span class="positive-bg">&nbsp;</span><div>审批流程</div>
                </div>
                <ion-list class="vivo-audit-infor">
                    <div class="item">
                        <span>拟制:<span class="audit-user-span">{{item.txt_FAuthor_text}}</span></span>
                        <div>
                            {{item.txt_FAuthor_value}}
                        </div>
                    </div>
                    <div class="item">
                        <span>QA审核:<span class="audit-user-span">{{item.txt_FQAManager_text}}</span></span>
                        <div>
                            {{item.txt_FQAManager_value}}
                        </div>
                    </div>
                    <div class="item">
                        <span>财务审核:<span class="audit-user-span">{{item.txt_FFinanceManager_text}}</span></span>
                        <div>
                            {{item.txt_FFinanceManager_value}}
                        </div>
                    </div>
                    <div class="item">
                        <span>处理:<span class="audit-user-span">{{item.txt_FProcessing_text}}</span></span>
                        <div>
                            {{item.txt_FProcessing_value}}
                        </div>
                    </div>
                    <div class="item">
                        <span>批准:<span class="audit-user-span">{{item.txt_FApprove_text}}</span></span>
                        <div>
                            {{item.txt_FApprove_value}}
                        </div>
                    </div>
                    <div class="item">
                        <span>IPMT审核:<span class="audit-user-span">{{item.txt_FIPMTAudit_text}}</span></span>
                        <div>
                            {{item.txt_FIPMTAudit_value}}
                        </div>
                    </div>
                    <div class="item long-title">
                        <span>读者:<span class="audit-user-span">{{item.txt_FReaders_text}}</span></span>
                    </div>
                </ion-list>
            </div>
        </div>
        <div class="list card">
            <ion-item class="item item-icon-right bpm-detail-blue"
                      ng-click="togglSignText()">
                <i class="icon button-small " ng-class="isShowSignText ?'ion-ios-arrow-up':'ion-ios-arrow-down'"></i>
                变更跟踪
            </ion-item>
            <div class="bpm-detail-blue-bg vivo-maintext-div"></div>
        </div>
        <div class="list srm-Authentication-maintext" ng-show="isShowSignText">
            <div class="list card">
                <div class="item item-infor">
                    <span>验证是否合格:</span>
                    <div>{{item.div_TValidPass}}</div>
                </div>
                <div class="item item-infor">
                    <span>文档是否更新:</span>
                    <div>{{item.div_TDocUpdate}}</div>
                </div>
                <div class="item item-infor">
                    <span>SQA:</span>
                    <div>{{item.txt_TSQA}}</div>
                </div>
            </div>

            <div class="list card">
                <div class="item title">
                    <span class="positive-bg">&nbsp;</span><div>审批流程</div>
                </div>
                <ion-list class="vivo-audit-infor">
                    <div class="item">
                        <span>跟踪人:<span class="audit-user-span">{{item.txt_TTracePerson_text}}</span></span>
                        <div>
                            {{item.txt_TTracePerson_value}}
                        </div>
                    </div>
                    <div class="item long-title">
                        <span>读者:<span class="audit-user-span">{{item.txt_TReaders_text}}</span></span>
                    </div>
                </ion-list>
            </div>
        </div>
        <div class="list card" >
            <ion-item class="item item-icon-right bpm-detail-blue"
                      ng-click="toggleReplyText()">
                <i class="icon button-small " ng-class="isShowReplyText ?'ion-ios-arrow-up':'ion-ios-arrow-down'"></i>
                变更异常分析
            </ion-item>
            <div class="bpm-detail-blue-bg vivo-maintext-div"></div>
        </div>
        <div class="list srm-Authentication-maintext" ng-show="isShowReplyText">
            <div class="list card">
                <div class="item title">
                    <span class="calm-bg">&nbsp;</span><div>变更产生的根源分析</div>
                </div>
                <div class="item">
                    <div id="div_ARootContainer" class="ViceText-div"></div>
                </div>
            </div>
            <div class="list card">
                <div class="item title">
                    <span class="royal-bg">&nbsp;</span><div> 预防措施</div>
                </div>
                <div class="item">
                    <div id="div_APreventContainer" class="ViceText-div"></div>
                </div>
            </div>
            <div class="list card">
                <div class="item item-infor">
                    <span>备注说明:</span>
                    <div>{{item.txt_ARemark}}</div>
                </div>
            </div>

            <div class="list card">
                <div class="item title">
                    <span class="positive-bg">&nbsp;</span><div>审批流程</div>
                </div>
                <ion-list class="vivo-audit-infor">
                    <div class="item">
                        <span>异常处理人:<span class="audit-user-span">{{item.txt_AProcessing_text}}</span></span>
                        <div>
                            {{item.txt_AProcessing_value}}
                        </div>
                    </div>
                    <div class="item long-title" ng-if="isTodo=='0'&& controlApproval.controlID== 'txt_AMagnege'">
                        <span>异常审核:<span class="audit-user-span">{{item.txt_AMagnege_text}}</span>
                            <a class="button button-icon icon ion-ios-minus-outline positive button-small" ng-if="item.txt_AMagnege_text!=''" ng-click="clickRemoveApprovaler()"></a>
                            <a class="button button-icon icon ion-ios-plus-outline positive button-small" ng-click="clickAddApprovaler()"></a>
                        </span>
                        <div>
                            {{item.txt_AMagnege_value}}
                        </div>
                    </div>
                    <div class="item" ng-if="isTodo!='0'|| controlApproval.controlID!= 'txt_AMagnege'">
                        <span>异常审核:<span class="audit-user-span">{{item.txt_AMagnege_text}}</span></span>
                        <div>
                            {{item.txt_AMagnege_value}}
                        </div>
                    </div>
                    <div class="item long-title">
                        <span>读者:<span class="audit-user-span">{{item.txt_AReaders_text}}</span></span>
                    </div>
                </ion-list>
            </div>
        </div>
        <div class="list card">
            <ion-item class="item item-icon-right bpm-detail-blue"
                      ng-click="togglMenu4()">
                <i class="icon button-small " ng-class="isShowMenu4 ?'ion-ios-arrow-up':'ion-ios-arrow-down'"></i>
                确认
            </ion-item>
            <div class="bpm-detail-blue-bg vivo-maintext-div"></div>
        </div>
        <div class="list srm-Authentication-maintext" ng-show="isShowMenu4">
            <div class="list card">
                <div class="item item-infor">
                    <span>措施是否有效:</span>
                    <div>{{item.div_CMeasureValid}}</div>
                </div>
                <div class="item item-infor">
                    <span>措施是否已实施:</span>
                    <div>{{item.div_CMeasureImplement}}</div>
                </div>
                <div class="item item-infor">
                    <span>备注说明:</span>
                    <div>{{item.txt_CContractSpecification}}</div>
                </div>
            </div>

            <div class="list card">
                <div class="item title">
                    <span class="positive-bg">&nbsp;</span><div>审批流程</div>
                </div>
                <ion-list class="vivo-audit-infor">
                    <div class="item long-title" ng-if="isTodo=='0'&& controlApproval.controlID== 'txt_CConfirm'">
                        <span>确认人:<span class="audit-user-span">{{item.txt_CConfirm_text}}</span>
                            <a class="button button-icon icon ion-ios-minus-outline positive button-small" ng-if="item.txt_CConfirm_text!=''" ng-click="clickRemoveApprovaler()"></a>
                            <a class="button button-icon icon ion-ios-plus-outline positive button-small" ng-click="clickAddApprovaler()"></a>
                        </span>
                        <div>
                            {{item.txt_CConfirm_value}}
                        </div>
                    </div>
                    <div class="item" ng-if="isTodo!='0'|| controlApproval.controlID!= 'txt_CConfirm'">
                        <span>确认人:<span class="audit-user-span">{{item.txt_CConfirm_text}}</span></span>
                        <div>
                            {{item.txt_CConfirm_value}}
                        </div>
                    </div>
                    <div class="item long-title">
                        <span>读者:<span class="audit-user-span">{{item.txt_CReaders_text}}</span></span>
                    </div>
                </ion-list>
            </div>
        </div>
    </ion-content>
    <ion-footer-bar align-title="center" class="vivo-bpm-footer" ng-if="isTodo=='0'">
        <div class="vivo-bpm-footer-input" ng-if="isShowFooterInput">
            <div class="vivo-bpm-footer-input-bg">
                <textarea placeholder="请输入审批意见" ng-model="item.optionInput"></textarea>
            </div>
        </div>
        <a class="vivo_footer_btn1" ng-if="item.isShowOptionButton==1" ng-click="toggleFooterInput()"><span></span></a>
        <a class="vivo_footer_btn2" ng-if="item.isShowAgreeButton==1||item.isShowOptionButton==1" ng-click="clickAgree()"><span></span></a>
        <a class="vivo_footer_btn3" ng-if="item.isShowDisagreeButton==1||item.isShowOptionButton==1" ng-click="clickdisagree()"><span></span></a>
        <a class="vivo_footer_btn5" ng-if="item.isShowSubmitButton==1" ng-click="clickSubmit()"><span></span></a>
        <a class="vivo_footer_btn4" ng-click="clickToDispatch()"><span></span></a>
    </ion-footer-bar>
    <div class="btn-scroll-top" ng-click="scrollTop()" id="btn-scroll-top">
        <button class="button button-icon icon ion-arrow-up-a positive"></button>
    </div>
    <div class="btn-scroll-bottom" ng-click="scrollBottom()"  id="btn-scroll-bottom">
        <button class="button button-icon icon ion-arrow-down-a positive"></button>
    </div>
</ion-view>